document.addEventListener("DOMContentLoaded", () => {
    const video = document.getElementById("scanner");
    const nameInput = document.getElementById("nameInput");
    const qrForm = document.getElementById("qrForm");

    navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } })
        .then(stream => {
            video.srcObject = stream;
            video.play();
        })
        .catch(console.error);

    const scanner = new QrScanner(video, result => {
        console.log("Scanned QR Code:", result.data);  // Debugging line
        nameInput.value = result.data.trim();  // Trim spaces
        qrForm.submit();  // Auto-submit
    });
    scanner.start();
});
